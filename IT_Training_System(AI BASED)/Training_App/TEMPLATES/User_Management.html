{% extends 'Base.html'%}
{% block content%}
{% if messages %}

{% for message in messages %}
{% if message.tags %}  <script>alert("{{ message }}")</script> {% endif %}

{% endfor %}

{% endif %}
{%load static%}
<div style="background-image: url(); background-repeat:no-repeat;background-size:cover;  min-height:687px; width:100%;height: auto;">

<header>
    <h1>User Management </h1>
</header>


<style>
th,tr{
    text-align: center;
}
</style>
<!-- Modal for view button -->
<!-- View Modal -->
<div class="modal fade" id="myModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Teacher Details</h5> 
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
             <div class="container">
        <form class="row g-3" method="POST" action="" enctype="multipart/form-data">
            {% csrf_token %}
              <div class="col-md-6">
                    <label  class="form-label">ID</label>
                    <input type="text" class="form-control" name="updateid" id="updateid"  readonly>
              </div>

              <div class="col-md-6">
                    <label  class="form-label">Name</label>
                    <input type="text" class="form-control" name="updatename" id="updatename"  readonly>
              </div>

              <div class="col-md-12">
                    <label for="inputPassword4" class="form-label">Email</label>
                    <input type="text" class="form-control" name="updateage" id="updateage"  readonly>

                
              </div>

              <div class="col-12">
                    <label for="inputAddress" class="form-label">Address</label>
                    <input type="text" class="form-control"  
                    name="updategender" id="updategender"   readonly>
              </div>


              <div class="col-md-12">
                  <label class="form-label">Phone</label>
                  <input type="text" class="form-control" id="phone" name="" readonly>
              </div>

              <div class="col-md-12">
                  <label class="form-label">Birth Date</label>
                  <input type="text" class="form-control" id="birth_date" name="" readonly>
              </div>

              <div class="col-md-12">
                  <label class="form-label">Gender</label>
                  <input type="text" class="form-control" id="gender" name="" readonly>
              </div>



              <div class="col-md-12">
                  <label class="form-label">Username</label>
                  <input type="text" class="form-control" id="Username" name="" readonly>
              </div>

              <div class="col-md-12">
                  <label class="form-label">Password</label>
                  <input type="text" class="form-control" id="password" name="" readonly>
              </div>

      






        </form>
    </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- --------------------------------------------------------------------------------------- -->
<!-- Modal for Update button -->
<!-- View Modal -->
<div class="modal fade" id="myModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Teacher Details</h5> 
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
             <div class="container">
        <form class="row g-3" method="POST" action="/Update_Teacher/" enctype="multipart/form-data">
            {% csrf_token %}


            <div class="col-md-6">
                    <label  class="form-label">ID</label>
                    <input type="text" class="form-control" name="viewid" id="viewid"  readonly>
              </div>

              <div class="col-md-6">
                    <label  class="form-label">Name</label>
                    <input type="text" class="form-control" name="viewname" id="viewname"  required>
              </div>

              <div class="col-md-12">
                    <label for="inputPassword4" class="form-label">Email</label>
                    <input type="text" class="form-control" name="viewage" id="viewage"  required>

                
              </div>

              <div class="col-12">
                    <label for="inputAddress" class="form-label">Address</label>
                    <input type="text" class="form-control"  
                    name="viewaddress" id="viewaddress"   required>
              </div>


              <div class="col-md-12">
                  <label class="form-label">Phone</label>
                  <input type="text" class="form-control" id="viewphone" name="phone" required>
              </div>

              <div class="col-md-6">
                  <label class="form-label">Birth Date</label>
                  <input type="text" class="form-control" id="viewbirth_date"  readonly>
              </div>


              <div class="col-md-6">
                <label class="form-label">Select Birth Date</label>
                
                    <div class="input-box">
                        <input class="form-control" type="date" max="{% now 'Y-m-d' %}" name="birth_date" placeholder="Enter birth date" required />
                    </div>
                
              </div>

              <div class="col-md-6">
                  <label class="form-label">Gender</label>
                  <input type="text" class="form-control" id="viewgender" name="" readonly>
              </div>

              <div class="col-md-6">
                    <label class="form-label">Select Gender</label>


                    <select class="form-select" name="gender">
                        <option hidden id="selectgender"></option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="N/A">N/A</option>
                    </select>
              </div>


              <div class="col-md-6">
                   <label class="form-label">Username</label>
                   <input type="text" class="form-control" name="" id="viewUsername" readonly>
              </div>

              <div class="col-md-6">
                    <label class="form-label" for="username">Username</label>
                    <input class="form-control" type="text" id="username" name="username" placeholder="Enter Username" pattern="[a-z]{4,8}" title="Username should be lowercase and consist of four-eight letters."  />
              </div>


              <div class="col-md-6">
                   <label class="form-label">Password</label>
                   <input type="text" class="form-control" name="" id="viewpassword" readonly>
              </div>


              <div class="col-md-6">
                    <label for="password">Password</label>
                    <input type="password" id="password1" name="password" placeholder="Enter Password" pattern="^(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{4,}$" title="Password should be alphanumeric with at least one capital letter and a minimum length of 4 characters." minlength="4"  />
              </div>





            <input class="btn btn-secondary" type="submit"  name="">

        </form>
    </div>
      </div>
      
    </div>
  </div>
</div>
<!-- --------------------------------------------------------------------------------------- -->


<div class="container">

    <div style="display:flex;justify-content: right;align-content: right;padding-top: 20px;">
      <a  href="/Teacher_Registration/" class="btn btn-info">Add Teacher    <i class="fa-solid fa-user"></i></a>
    </div>
    <br>
    <br>



    <table class="table table-warning table-stripped table-bordered table-hover">
        <thead>
            <th>Teacher ID</th>
            <th>Teacher Name</th>
            <th>Email</th>
            <th>Gender</th>
            <th colspan="3">Action</th>
        </thead>

        <tbody>
            {%for i in details%}
            <tr>
                <td>{{i.id}}</td>
                <td>{{i.full_name}}</td>
                <td>{{i.email}}</td>
                <td>{{i.gender}}</td>
                <td>
                        <input type="button" class="btn btn-secondary" id="{{i.id}}
                                                            ${{i.full_name}}
                                                            ${{i.email}}
                                                            ${{i.Address}}
                                                            ${{i.phone}}
                                                            ${{i.birth_date}}
                                                            ${{i.gender}}
                                                            ${{i.username}}
                                                            ${{i.password}}"
                             value="View" onclick="View(this)" style="width: 100%;">

                </td>
                        
                <td>
                    <input type="button" class="btn btn-warning "id="{{i.id}}
                                                            ${{i.full_name}}
                                                            ${{i.email}}
                                                            ${{i.Address}}
                                                            ${{i.phone}}
                                                            ${{i.birth_date}}
                                                            ${{i.gender}}
                                                            ${{i.username}}
                                                            ${{i.password}}"
                         value="Update" onclick="Update(this)" style="width: 100%;">
                </td>

                <td >
                    <a type="button" class="btn btn-danger" href="/Delete_Teacher/{{i.id}}" style="width: 100%;">Delete</a>
                </td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">


    function View(me){
        $('#myModal1').modal('show');
        var id          = me.id;
        var str         = id.split("$");
        var ids         = str[0];
        var Name        = str[1];
        var email         = str[2];
        var Address      = str[3];
        var phone      = str[4];
        var birth_date      = str[5];
        var gender      = str[6];
        var username      = str[7];
        var password      = str[8];


        console.log("id :",ids)
        console.log("Name :",Name)
        console.log("email :",email)
        console.log("Address :",Address)
        console.log("phone :",phone)
        console.log("birth_date :",birth_date)
        console.log("gender :",gender)
       
       

        document.getElementById("updateid").value       = ids;
        document.getElementById("updatename").value     = Name;
        document.getElementById("updateage").value      = email;
        document.getElementById("updategender").value   = Address;
        document.getElementById("phone").value  = phone;
        document.getElementById("birth_date").value   = birth_date;
        document.getElementById("gender").value   = gender;
        document.getElementById("Username").value   = username;
        document.getElementById("password").value   = password;
       
        
    }


 function Update(me){
        $('#myModal2').modal('show');
        var id          = me.id;
        var str         = id.split("$");
        var ids         = str[0];
        var Name        = str[1];
        var email         = str[2];
        var Address      = str[3];
        var phone      = str[4];
        var birth_date      = str[5];
        var gender      = str[6];
        var username      = str[7];
        var password      = str[8];
       

        document.getElementById("viewid").value       = ids;
        document.getElementById("viewname").value     = Name;
        document.getElementById("viewage").value      = email;
        document.getElementById("viewaddress").value   = Address;
        document.getElementById("viewphone").value  = phone;
        document.getElementById("viewbirth_date").value   = birth_date;
        document.getElementById("viewgender").value   = gender;
        document.getElementById("viewUsername").value   = username;
        document.getElementById("viewpassword").value   = password;

        document.getElementById("selectgender").value = gender;

        
        
    }

    </script>



</div>
{% endblock %}